# 老舗特化検索アプリ 要件定義書
Project Name: 老舗Master

---

## 1. プロジェクト概要

本プロジェクトは、駅名または現在地を起点として、
**長く続いてきた老舗の飲食店・総菜屋・甘味処・喫茶店などを検索・理解・記録できるWebアプリ**を開発する。

本アプリはハッカソン向けMVPとして実装する。

---

## 2. コンセプト / メッセージ

歴史を感じる、老舗特化検索アプリ。  
長く続くには理由がある。  
味・空間・時間──その店が歩んできた物語を、今の自分が味わう。

---

## 3. 対象ユーザー

- 落ち着いた飲食店を好むユーザー
- 街歩き・一人外食・旅行中のユーザー
- チェーン店よりも個人店・文化的価値を重視するユーザー

---

## 4. 機能要件

### 4.1 検索機能（コア機能）

以下2種類の検索を提供する。

### 4.1.1 駅名検索
入力：
- 駅名（例：横浜）
- ジャンル（以下から選択）
  - 飲食店全般
  - 焼き鳥
  - 喫茶店
  - 甘味処
  - 総菜屋

出力：
- 老舗候補の店舗一覧（最大10件）

---

### 4.1.2 現在地検索（地図検索）
入力：
- 現在地（ブラウザのGeolocation API）
- 半径（ 1 / 5 / 10 / 25 km）
- ジャンル

出力：
- 指定範囲内の老舗候補一覧
- Google Map 上へのピン表示

---

### 4.2 老舗判定（MVP定義）

以下の情報をAIが**定性的**に評価し、その店が持つ「物語」や「歴史の重み」を解釈する。

- **判定基準（定性評価）**：
  - 単なる創業年数だけでなく、「語られ方」を重視する。
  - 「地元で愛され続けている」「昭和の雰囲気が色濃く残る」「代々受け継がれる味」といったナラティブな要素を評価。

- **老舗スコア（参考値）**：
  - 明確な加点方式ではなく、AIが総合的に判断した「老舗度」をスコア化（例：100点満点）。
  - ※ ユーザーには「AIが感じた老舗度」として提示する。

### 4.3 検索結果一覧

各店舗カードに以下を表示する。

- 店名
- ジャンル
- 距離（現在地検索時）
- 老舗スコア（AI算出）
- **老舗根拠の要約（AI生成）**：
  - 「なぜ老舗と判断したか」をワンフレーズで情感たっぷりに紹介（例：「創業50年、変わらぬデミグラスソースが常連を魅了」）。
- 店舗詳細ページへのリンク

---

### 4.4 店舗詳細画面

以下の情報を表示する。

1. 基本情報
   - 店名
   - 住所
   - Google Maps へのリンク
   - グルメサイト（食べログ等）へのリンク

2. **AI店主による老舗解説**（Google Maps Grounding 活用）
   - 店舗の歴史背景
   - 「ここを見てほしい」というポイント（内装、看板娘、名物料理）
   - 雰囲気・利用シーン（「一人で本を読むのに最適」など）
   - 情報の出典URL一覧

3. 地図表示
   - Google Map 縮小表示
   - ピン表示
   - タップでフルマップ表示

4. ユーザーメモ
   - 自由入力
   - ログインユーザーごとに保存

---

## 5. 認証・データ保存

### 5.1 認証
- Firebase Authentication を使用する。

### 5.2 データベース
- Firestore を使用する。

保存対象：
- users
- memos（ユーザー × 店舗単位）
- favorites（任意）
- searchLogs（任意）

※ 店舗情報そのものは原則保存せず、検索時に取得する。

---

## 6. 技術スタック

### フロントエンド
- **Next.js 16 (App Router)**
  - `src/app` ディレクトリ構造を採用
  - Server Components をデフォルトとして利用
- **TypeScript**
- **Tailwind CSS 4.0**
  - CSS-first configuration (`@theme` ブロック利用)
  - `tailwind.config.js` は原則使用しない
- モバイル対応（レスポンシブ）

### バックエンド
- Next.js Route Handlers (`src/app/api/...`)
- Cloud Run にデプロイ

### バックエンド
- Next.js Route Handlers
- Cloud Run にデプロイ

### AI / 外部API
- Vertex AI
  - **Gemini 3.0 Pro**
  - Google Search / Google Maps Grounding
- Google Places API（Nearby Search）

---

## 7. UI / UX 方針

- モバイルファースト
- 落ち着き・温かみを感じるデザイン
- カラートーン：
  - ブラウン / オレンジ / モノトーン
- **3D要素の活用（AntiGravityらしさ）**
  - メインビジュアルやローディングに、世界観を壊さない「3Dオブジェクト（暖簾、提灯、湯気など）」を取り入れる。
  - `React Three Fiber` (`@react-three/fiber`, `@react-three/drei`) を使用。

---

## 8. 非機能要件

- 検索結果表示：15秒以内（AI処理を考慮）
- 店舗詳細調査：ユーザー操作時のみ実行
- AI生成情報は必ず出典URLを表示する

---

## 9. スコープ定義

### 実装する（MVP）
- 駅名検索
- 現在地＋半径検索
- 老舗判定・一覧表示
- 店舗詳細画面
- 地図表示
- ユーザーメモ

### 実装しない
- 高度なレコメンド
- SNS共有
- 通知機能
- 多言語対応

---

## 10. 開発方針

- 本要件定義書を唯一の仕様書とする
- UI/UXを先に設計する
- まず動くMVPを優先し、完成度より体験を重視する
- AIは「調査 → 検証 → 要約 → 構造化」の役割を担う
